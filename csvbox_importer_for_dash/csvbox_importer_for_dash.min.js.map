{"version":3,"file":"csvbox_importer_for_dash.min.js","mappings":"mBACA,IC2BYA,ED3BRC,EAAsB,CEA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,GJL1DC,EAAmB,WACnB,IAAIC,EAASC,SAASC,cACtB,IAAKF,EAAQ,CAOT,IAHA,IAAIG,EAAcF,SAASG,qBAAqB,UAC5CC,EAAU,GAELC,EAAI,EAAGA,EAAIH,EAAYI,OAAQD,IACpCD,EAAQG,KAAKL,EAAYG,IAI7BN,GADAK,EAAUA,EAAQI,QAAO,SAASC,GAAK,OAAQA,EAAEC,QAAUD,EAAEE,OAASF,EAAEG,WAAa,KACpEC,OAAO,GAAG,EAC/B,CAEA,OAAOd,CACX,EAkBA,GAZAb,OAAOC,eAAeX,EAAqB,IAAK,CAC5Ca,KAGQd,EAFSuB,IAEIgB,IAAIC,MAAM,KAAKF,MAAM,GAAI,GAAGG,KAAK,KAAO,IAElD,WACH,OAAOzC,CACX,KAIsB,oBAAnB0C,eAAgC,CACvC,IAAIC,EAAqBD,eACzBA,eAAiB,SAASE,GACtB,IAnBqBpB,EAoBjBqB,GApBiBrB,EAmBRD,IAlBV,6BAA6BuB,KAAKtB,EAAOe,MAqBxCA,EAAMI,EAAmBC,GAE7B,IAAIC,EACA,OAAON,EAGX,IAAIQ,EAAeR,EAAIC,MAAM,KACzBQ,EAAgBD,EAAaT,OAAO,GAAG,GAAGE,MAAM,KAKpD,OAHAQ,EAAcC,OAAO,EAAG,EAAG,qBAC3BF,EAAaE,QAAQ,EAAG,EAAGD,EAAcP,KAAK,MAEvCM,EAAaN,KAAK,IAC7B,CACJ,C,qDKxDA,MAAM,EAA+BS,OAAc,M,aCAnD,MAAM,EAA+BA,OAAkB,U,aCSvD,SAASC,EAAgBzC,EAAG0C,GAM1B,OALAD,EAAkBxC,OAAO0C,gBAAkB,SAAyB3C,EAAG0C,GAErE,OADA1C,EAAE4C,UAAYF,EACP1C,CACT,EAEOyC,EAAgBzC,EAAG0C,EAC5B,CAUA,IAEIG,EAA4B,SAAUC,GA1B1C,IAAwBC,EAAUC,EA6BhC,SAASH,EAAaI,GACpB,IAAIC,EAYJ,OAVAA,EAAQJ,EAAWrC,KAAK0C,KAAMF,IAAUE,MAClCC,OAAS,gBACfF,EAAMG,UAAYH,EAAMG,UAAUC,KAlBtC,SAAgCC,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,CACT,CAY2CE,CAAuBP,IAC9DA,EAAMQ,cAAe,EACrBR,EAAMS,wBAAyB,EAC/BT,EAAMU,KAAOV,EAAMW,eACnBX,EAAMY,MAAQ,CACZC,WAAW,GAEbb,EAAMc,OAAS,KACRd,CACT,CA3CgCF,EA2BHF,GA3BPC,EA2BPF,GA1BNtC,UAAYN,OAAOgE,OAAOjB,EAAWzC,WAC9CwC,EAASxC,UAAU2D,YAAcnB,EAEjCN,EAAgBM,EAAUC,GAyC1B,IAAImB,EAAStB,EAAatC,UAmP1B,OAjPA4D,EAAOC,kBAAoB,WACzB,IAAIC,EAAOlB,KAAKF,MAAMoB,KAEjBA,GAASlB,KAAKa,OAERK,GACTlB,KAAKmB,iBAFLnB,KAAKoB,cAIT,EAEAJ,EAAOI,aAAe,WACpB,IAAIC,EAASrB,KAETsB,EAActB,KAAKF,MAAMwB,YAC7BA,SAA0DA,IAC1D,IAAIC,EAAOvB,KAAKF,MAAMyB,KAClBC,EAAiBxB,KAAKF,MAAM0B,eAC5BC,EAAUzB,KAAKF,MAAM2B,QACrBC,EAAU1B,KAAKF,MAAM4B,QACrBC,EAAW3B,KAAKF,MAAM6B,SACtBC,EAAW5B,KAAKF,MAAM8B,SACtBC,EAAU7B,KAAKF,MAAM+B,QACrBC,EAAa9B,KAAKF,MAAMgC,WACxBC,EAAe/B,KAAKF,MAAMiC,aAC1BC,EAAehC,KAAKF,MAAMkC,aAC1BC,EAAWjC,KAAKF,MAAMmC,SACtBC,EAASF,GAA8B,gBAEvCD,IACFG,EAASH,EAAe,IAAMG,GAGhC,IAAIC,EAAY,WAAaD,EAAS,UAAYJ,EAClDK,GAAa,yBACbA,GAAa,mBAETJ,IACFI,GAAa,oBAGXF,IACFE,GAAa,aAAeF,GAG9B5C,OAAO+C,iBAAiB,WAAW,SAAUC,GAkBzC,IAAIC,EAAaC,EADnB,GAhBmB,oBAAfF,EAAMG,OACJnB,EAAOpB,QAAUoB,EAAOpB,OAAOwC,UACjCpB,EAAOpB,OAAOwC,QAAQC,MAAMC,QAAU,QAExCtB,EAAOd,cAAe,EACtBsB,SAAkDA,KAGjC,qBAAfQ,EAAMG,MACRb,GAAS,GAGQ,iBAAfU,EAAMG,MACRb,GAAS,GAGc,iBAAdU,EAAMG,OAGVH,SAA6E,QAA9BC,EAAcD,EAAMG,YAAkC,IAAhBF,GAA4E,QAAzCC,EAAmBD,EAAYE,YAAuC,IAArBD,OAApI,EAA2KA,EAAiBK,eAAiBvB,EAAOZ,KAC5P,GAAI4B,EAAMG,KAAKK,MAA2B,kBAAnBR,EAAMG,KAAKK,KAA0B,CAC1D,IAAIC,EAAWT,EAAMG,KAAKA,KAC1BM,EAA0B,gBAAIT,EAAMG,KAAKO,sBAClCD,EAAuB,aAC9BlB,SAAoDA,EAASkB,EAC/D,MAAO,GAAIT,EAAMG,KAAKK,MAA2B,oBAAnBR,EAAMG,KAAKK,KACvC,GAAqC,WAAjCR,EAAMG,KAAKA,KAAKQ,cAClB,GAAIX,EAAMG,MAAQH,EAAMG,KAAKS,SAAU,CACrC,IAAIC,EAAmBb,EAAMG,KAAKS,SAC9BE,EAAUd,EAAMG,KAAKW,QACrBC,EAAO,GACPC,EAA0BhB,EAAMG,KAAKc,sBACrCC,EAA0BlB,EAAMG,KAAKgB,uBAAyB,GAC9DC,EAAmCpB,EAAMG,KAAKiB,iCAClDP,EAAiBQ,SAAQ,SAAUT,GACjC,IAAIU,EAAI,CAAC,EACLC,EAAkB,CAAC,EACnBC,EAAe,CAAC,EACpBZ,EAAST,KAAKkB,SAAQ,SAAUI,EAAK7F,GACxB8F,MAAPD,IACFA,EAAM,IAGFL,EAAiCxF,IAAQwF,EAAiCxF,GAAG6F,KACjFA,EAAML,EAAiCxF,GAAG6F,IAGxCT,EAAwBW,SAAS/F,GACnC2F,EAAgBT,EAAQlF,IAAM6F,EACrBP,EAAwBS,SAAS/F,GAC1C4F,EAAaV,EAAQlF,IAAM6F,EAE3BH,EAAER,EAAQlF,IAAM6F,CAEpB,IAEIb,EAASgB,gBACXN,EAAkB,eAAIV,EAASgB,eAG7BL,GAAmB9G,OAAOoH,KAAKN,GAAiB1F,OAAS,IAC3DyF,EAAiB,cAAIC,GAGnBC,GAAgB/G,OAAOoH,KAAKL,GAAc3F,OAAS,IACrDyF,EAAiB,cAAIE,GAGvBT,EAAKjF,KAAKwF,EACZ,IACA,IAAIQ,EAAY9B,EAAMG,KAAKA,KAC3B2B,EAAgB,KAAIf,EACpBe,EAA2B,gBAAI9B,EAAMG,KAAKO,eAC1CoB,EAAuB,YAAI9B,EAAMG,KAAK4B,YACtCD,EAA2B,gBAAI9B,EAAMG,KAAK6B,0BACnCF,EAAwB,aAC/BxC,GAAS,EAAMwC,EACjB,KAAO,CACL,IAAIG,EAAajC,EAAMG,KAAKA,YACrB8B,EAAyB,aAChC3C,GAAS,EAAM2C,EACjB,MAEA3C,GAAS,EAAOU,EAAMG,KAAKA,WAExB,GAAIH,EAAMG,KAAKK,MAA2B,uBAAnBR,EAAMG,KAAKK,KACnCxB,EAAOpB,QAAUoB,EAAOpB,OAAOwC,UACjCpB,EAAOpB,OAAOwC,QAAQC,MAAMC,QAAU,QAExCtB,EAAOd,cAAe,EACtBsB,SAAkDA,SAC7C,GAAIQ,EAAMG,KAAKK,MAA2B,4BAAnBR,EAAMG,KAAKK,KAAoC,CAC3E,IAAI0B,EAEoC,QAAvCA,EAAkBlD,EAAOM,gBAA0C,IAApB4C,GAAsCA,EAAgBjH,KAAK+D,GAAQ,EACrH,MAAO,GAAIgB,EAAMG,KAAKK,MAA2B,wBAAnBR,EAAMG,KAAKK,KAAgC,CACvE,IAAI2B,EAEqC,QAAxCA,EAAmBnD,EAAOM,gBAA2C,IAArB6C,GAAuCA,EAAiBlH,KAAK+D,GAAQ,EACxH,CAGN,IAAG,GACH,IAAIjB,EAAOJ,KACPa,EAASjD,SAAS6G,cAAc,UACpCzE,KAAKa,OAASA,EACdA,EAAO6D,aAAa,MAAOvC,GAC3BtB,EAAO8D,YAAc,EACrB9D,EAAO+D,UAAUC,IAAI,iBACrBhE,EAAO6B,MAAMoC,OAAS,OACtBjE,EAAO6B,MAAMqC,MAAQ,OACrBlE,EAAO6B,MAAMsC,SAAW,WACxBnE,EAAO6B,MAAMuC,IAAM,MACnBpE,EAAO6B,MAAMwC,KAAO,MACpB7F,OAAO+C,iBAAiB,UAAWpC,KAAKmF,gBAAgB,GAExDtE,EAAOuE,OAAS,WACdhF,EAAKe,iBACLN,EAAOwE,cAAcC,YAAY,CAC/B,SAAY/D,GAAc,KAC1B,QAAWC,GAAkC,KAC7C,QAAWC,GAAoB,KAC/B,aAAgBrB,EAAKK,MACpB,KACHiB,SAAkDA,IAE9CtB,EAAKI,yBACPJ,EAAKF,YACLE,EAAKI,wBAAyB,EAElC,EAEAR,KAAKC,OAAOwC,QAAQ8C,YAAY1E,EAClC,EAEAG,EAAOd,UAAY,WAGjB,GAFWF,KAAKF,MAAMoB,OAGflB,KAAKa,OAGR,OAFAb,KAAKQ,wBAAyB,OAC9BR,KAAKoB,eAKJpB,KAAKO,eACHP,KAAKW,MAAMC,UAKdZ,KAAKQ,wBAAyB,GAJ9BR,KAAKO,cAAe,EACpBP,KAAKa,OAAOwE,cAAcC,YAAY,YAAa,KACnDtF,KAAKC,OAAOwC,QAAQC,MAAMC,QAAU,SAK1C,EAEA3B,EAAON,aAAe,WACpB,OAAO8E,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,IAAMH,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,GAC/F,EAEA3E,EAAOG,eAAiB,WACtBnB,KAAK4F,SAAS,CACZhF,WAAW,GAEf,EAEAI,EAAO6E,OAAS,WACd,IAAIC,EAAc,CAChBnD,QAAS,OACToD,OAAQ,WACRf,SAAU,QACVC,IAAK,EACLe,OAAQ,EACRd,KAAM,EACNe,MAAO,GAGT,OAAIjG,KAAKF,MAAM+F,OACO,kBAAoB,MAAO,KAAM7F,KAAKF,MAAM+F,OAAO7F,KAAKE,UAAWF,KAAKW,MAAMC,WAAyB,kBAAoB,MAAO,CACpJsF,IAAKlG,KAAKC,OACVyC,MAAOoD,KAGW,kBAAoB,MAAO,KAAmB,kBAAoB,SAAU,CAC9FK,SAAUnG,KAAKW,MAAMC,UACrBwF,QAASpG,KAAKE,UACd,wBAAwB,EACxB,oBAAqBF,KAAKS,MACzBT,KAAKF,MAAMuG,UAAwB,kBAAoB,MAAO,CAC/DH,IAAKlG,KAAKC,OACVyC,MAAOoD,IAGb,EAEOpG,CACT,CAvQgC,CAuQ9B,EAAA4G,W,q6BC/RF,IAGqBC,EAAqB,SAAA5G,I,qRAAA6G,CAAAD,EAAA5G,GAAA,I,QAAA8G,G,EAAAF,E,qrBAAA,SAAAA,IAAA,O,4FAAAG,CAAA,KAAAH,GAAAE,EAAAE,MAAA,KAAAC,UAAA,CAwBrC,O,EAxBqCL,G,EAAA,EAAA3J,IAAA,SAAAa,MACtC,WACI,IAAAoJ,EAA2C7G,KAAKF,MAAzCgH,EAAED,EAAFC,GAAIhF,EAAU+E,EAAV/E,WAAYiF,EAAMF,EAANE,OAAQC,EAAQH,EAARG,SAE/B,OACIC,IAAAA,cAACvH,EAAY,CACToH,GAAIA,EACJhF,WAAYA,EACZP,KAAM,CAAE2F,QAASH,GACjBpF,SAAU,SAACwF,EAAQ3E,GACXwE,GACAA,EAAS,CACLG,OAAAA,EACA3E,KAAAA,GAGZ,EACAqD,OAAQ,SAACuB,EAAQxG,GACb,OAAOqG,IAAAA,cAAA,UAAQd,SAAUvF,EAAWwF,QAASgB,GAAQ,cACzD,GACH,SAIT,M,oEAACb,CAAA,CAxBqC,CAASD,EAAAA,WA2BnDC,EAAsBc,aAAe,CAAC,EAEtCd,EAAsBe,UAAY,CAI9BR,GAAIS,IAAAA,OAKJzF,WAAYyF,IAAAA,OAAiBC,WAK7BT,OAAQQ,IAAAA,OAAiBC,WAMzBR,SAAUO,IAAAA,KAKVJ,OAAQI,IAAAA,KAKR/E,KAAM+E,IAAAA,Q","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///external window \"React\"","webpack:///external window \"PropTypes\"","webpack:///./node_modules/@csvbox/react/dist/index.modern.js","webpack:///./src/lib/components/CsvboxImporterForDash.react.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","var getCurrentScript = function() {\n    var script = document.currentScript;\n    if (!script) {\n        /* Shim for IE11 and below */\n        /* Do not take into account async scripts and inline scripts */\n\n        var doc_scripts = document.getElementsByTagName('script');\n        var scripts = [];\n\n        for (var i = 0; i < doc_scripts.length; i++) {\n            scripts.push(doc_scripts[i]);\n        }\n\n        scripts = scripts.filter(function(s) { return !s.async && !s.text && !s.textContent; });\n        script = scripts.slice(-1)[0];\n    }\n\n    return script;\n};\n\nvar isLocalScript = function(script) {\n    return /\\/_dash-component-suites\\//.test(script.src);\n};\n\nObject.defineProperty(__webpack_require__, 'p', {\n    get: (function () {\n        var script = getCurrentScript();\n\n        var url = script.src.split('/').slice(0, -1).join('/') + '/';\n\n        return function() {\n            return url;\n        };\n    })()\n});\n\nif (typeof jsonpScriptSrc !== 'undefined') {\n    var __jsonpScriptSrc__ = jsonpScriptSrc;\n    jsonpScriptSrc = function(chunkId) {\n        var script = getCurrentScript();\n        var isLocal = isLocalScript(script);\n\n        var src = __jsonpScriptSrc__(chunkId);\n\n        if(!isLocal) {\n            return src;\n        }\n\n        var srcFragments = src.split('/');\n        var fileFragments = srcFragments.slice(-1)[0].split('.');\n\n        fileFragments.splice(1, 0, \"v0_0_1m1690558204\");\n        srcFragments.splice(-1, 1, fileFragments.join('.'))\n\n        return srcFragments.join('/');\n    };\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"PropTypes\"];","import React, { Component } from 'react';\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar version = \"1.1.8\";\n\nvar CSVBoxButton = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(CSVBoxButton, _Component);\n\n  function CSVBoxButton(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.holder = React.createRef();\n    _this.openModal = _this.openModal.bind(_assertThisInitialized(_this));\n    _this.isModalShown = false;\n    _this.shouldOpenModalOnReady = false;\n    _this.uuid = _this.generateUuid();\n    _this.state = {\n      isLoading: true\n    };\n    _this.iframe = null;\n    return _this;\n  }\n\n  var _proto = CSVBoxButton.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var lazy = this.props.lazy;\n\n    if (!lazy && !this.iframe) {\n      this.initImporter();\n    } else if (lazy) {\n      this.enableInitator();\n    }\n  };\n\n  _proto.initImporter = function initImporter() {\n    var _this2 = this;\n\n    var loadStarted = this.props.loadStarted;\n    loadStarted === null || loadStarted === void 0 ? void 0 : loadStarted();\n    var user = this.props.user;\n    var dynamicColumns = this.props.dynamicColumns;\n    var options = this.props.options;\n    var onReady = this.props.onReady;\n    var onImport = this.props.onImport;\n    var onSubmit = this.props.onSubmit;\n    var onClose = this.props.onClose;\n    var licenseKey = this.props.licenseKey;\n    var dataLocation = this.props.dataLocation;\n    var customDomain = this.props.customDomain;\n    var language = this.props.language;\n    var domain = customDomain ? customDomain : \"app.csvbox.io\";\n\n    if (dataLocation) {\n      domain = dataLocation + \"-\" + domain;\n    }\n\n    var iframeUrl = \"https://\" + domain + \"/embed/\" + licenseKey;\n    iframeUrl += \"?library-version=\" + version;\n    iframeUrl += \"&framework=react\";\n\n    if (dataLocation) {\n      iframeUrl += \"&preventRedirect\";\n    }\n\n    if (language) {\n      iframeUrl += \"&language=\" + language;\n    }\n\n    window.addEventListener(\"message\", function (event) {\n      if (event.data === \"mainModalHidden\") {\n        if (_this2.holder && _this2.holder.current) {\n          _this2.holder.current.style.display = 'none';\n        }\n        _this2.isModalShown = false;\n        onClose === null || onClose === void 0 ? void 0 : onClose();\n      }\n\n      if (event.data === \"uploadSuccessful\") {\n        onImport(true);\n      }\n\n      if (event.data === \"uploadFailed\") {\n        onImport(false);\n      }\n\n      if (typeof event.data == \"object\") {\n        var _event$data, _event$data$data;\n\n        if ((event === null || event === void 0 ? void 0 : (_event$data = event.data) === null || _event$data === void 0 ? void 0 : (_event$data$data = _event$data.data) === null || _event$data$data === void 0 ? void 0 : _event$data$data.unique_token) == _this2.uuid) {\n          if (event.data.type && event.data.type == \"data-on-submit\") {\n            var metadata = event.data.data;\n            metadata[\"column_mappings\"] = event.data.column_mapping;\n            delete metadata[\"unique_token\"];\n            onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit(metadata);\n          } else if (event.data.type && event.data.type == \"data-push-status\") {\n            if (event.data.data.import_status == \"success\") {\n              if (event.data && event.data.row_data) {\n                var primary_row_data = event.data.row_data;\n                var headers = event.data.headers;\n                var rows = [];\n                var dynamic_columns_indexes = event.data.dynamicColumnsIndexes;\n                var virtual_columns_indexes = event.data.virtualColumnsIndexes || [];\n                var dropdown_display_labels_mappings = event.data.dropdown_display_labels_mappings;\n                primary_row_data.forEach(function (row_data) {\n                  var x = {};\n                  var dynamic_columns = {};\n                  var virtual_data = {};\n                  row_data.data.forEach(function (col, i) {\n                    if (col == undefined) {\n                      col = \"\";\n                    }\n\n                    if (!!dropdown_display_labels_mappings[i] && !!dropdown_display_labels_mappings[i][col]) {\n                      col = dropdown_display_labels_mappings[i][col];\n                    }\n\n                    if (dynamic_columns_indexes.includes(i)) {\n                      dynamic_columns[headers[i]] = col;\n                    } else if (virtual_columns_indexes.includes(i)) {\n                      virtual_data[headers[i]] = col;\n                    } else {\n                      x[headers[i]] = col;\n                    }\n                  });\n\n                  if (row_data.unmapped_data) {\n                    x[\"_unmapped_data\"] = row_data.unmapped_data;\n                  }\n\n                  if (dynamic_columns && Object.keys(dynamic_columns).length > 0) {\n                    x[\"_dynamic_data\"] = dynamic_columns;\n                  }\n\n                  if (virtual_data && Object.keys(virtual_data).length > 0) {\n                    x[\"_virtual_data\"] = virtual_data;\n                  }\n\n                  rows.push(x);\n                });\n                var _metadata = event.data.data;\n                _metadata[\"rows\"] = rows;\n                _metadata[\"column_mappings\"] = event.data.column_mapping;\n                _metadata[\"raw_columns\"] = event.data.raw_columns;\n                _metadata[\"ignored_columns\"] = event.data.ignored_column_row;\n                delete _metadata[\"unique_token\"];\n                onImport(true, _metadata);\n              } else {\n                var _metadata2 = event.data.data;\n                delete _metadata2[\"unique_token\"];\n                onImport(true, _metadata2);\n              }\n            } else {\n              onImport(false, event.data.data);\n            }\n          } else if (event.data.type && event.data.type == \"csvbox-modal-hidden\") {\n            if (_this2.holder && _this2.holder.current) {\n              _this2.holder.current.style.display = 'none';\n            }\n            _this2.isModalShown = false;\n            onClose === null || onClose === void 0 ? void 0 : onClose();\n          } else if (event.data.type && event.data.type == \"csvbox-upload-successful\") {\n            var _this2$onImport;\n\n            (_this2$onImport = _this2.onImport) === null || _this2$onImport === void 0 ? void 0 : _this2$onImport.call(_this2, true);\n          } else if (event.data.type && event.data.type == \"csvbox-upload-failed\") {\n            var _this2$onImport2;\n\n            (_this2$onImport2 = _this2.onImport) === null || _this2$onImport2 === void 0 ? void 0 : _this2$onImport2.call(_this2, false);\n          }\n        }\n      }\n    }, false);\n    var self = this;\n    var iframe = document.createElement(\"iframe\");\n    this.iframe = iframe;\n    iframe.setAttribute(\"src\", iframeUrl);\n    iframe.frameBorder = 0;\n    iframe.classList.add('csvbox-iframe');\n    iframe.style.height = \"100%\";\n    iframe.style.width = \"100%\";\n    iframe.style.position = \"absolute\";\n    iframe.style.top = \"0px\";\n    iframe.style.left = \"0px\";\n    window.addEventListener(\"message\", this.onMessageEvent, false);\n\n    iframe.onload = function () {\n      self.enableInitator();\n      iframe.contentWindow.postMessage({\n        \"customer\": user ? user : null,\n        \"columns\": dynamicColumns ? dynamicColumns : null,\n        \"options\": options ? options : null,\n        \"unique_token\": self.uuid\n      }, \"*\");\n      onReady === null || onReady === void 0 ? void 0 : onReady();\n\n      if (self.shouldOpenModalOnReady) {\n        self.openModal();\n        self.shouldOpenModalOnReady = false;\n      }\n    };\n\n    this.holder.current.appendChild(iframe);\n  };\n\n  _proto.openModal = function openModal() {\n    var lazy = this.props.lazy;\n\n    if (lazy) {\n      if (!this.iframe) {\n        this.shouldOpenModalOnReady = true;\n        this.initImporter();\n        return;\n      }\n    }\n\n    if (!this.isModalShown) {\n      if (!this.state.isLoading) {\n        this.isModalShown = true;\n        this.iframe.contentWindow.postMessage('openModal', '*');\n        this.holder.current.style.display = 'block';\n      } else {\n        this.shouldOpenModalOnReady = true;\n      }\n    }\n  };\n\n  _proto.generateUuid = function generateUuid() {\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n  };\n\n  _proto.enableInitator = function enableInitator() {\n    this.setState({\n      isLoading: false\n    });\n  };\n\n  _proto.render = function render() {\n    var holderStyle = {\n      display: \"none\",\n      zIndex: 2147483647,\n      position: \"fixed\",\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0\n    };\n\n    if (this.props.render) {\n      return /*#__PURE__*/React.createElement(\"div\", null, this.props.render(this.openModal, this.state.isLoading), /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.holder,\n        style: holderStyle\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"button\", {\n        disabled: this.state.isLoading,\n        onClick: this.openModal,\n        \"data-csvbox-initator\": true,\n        \"data-csvbox-token\": this.uuid\n      }, this.props.children), /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.holder,\n        style: holderStyle\n      }));\n    }\n  };\n\n  return CSVBoxButton;\n}(Component);\n\nexport default CSVBoxButton;\nexport { CSVBoxButton };\n//# sourceMappingURL=index.modern.js.map\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { CSVBoxButton } from '@csvbox/react';\n\n/**\n * CsvboxImporterForDash is a component for CSVBox.io integration in Dash.\n */\nexport default class CsvboxImporterForDash extends Component {\n    render() {\n        const {id, licenseKey, userId, setProps} = this.props;\n\n        return (\n            <CSVBoxButton\n                id={id}\n                licenseKey={licenseKey}\n                user={{ user_id: userId }}\n                onImport={(result, data) => {\n                    if (setProps) {\n                        setProps({\n                            result,\n                            data\n                        });\n                    }\n                }}\n                render={(launch, isLoading) => {\n                    return <button disabled={isLoading} onClick={launch}>Upload file</button>;\n                }}\n            >\n                Import\n            </CSVBoxButton>\n        );\n    }\n}\n\nCsvboxImporterForDash.defaultProps = {};\n\nCsvboxImporterForDash.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * The license key for CSVBox.io.\n     */\n    licenseKey: PropTypes.string.isRequired,\n\n    /**\n     * The user ID for CSVBox.io.\n     */\n    userId: PropTypes.string.isRequired,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func,\n\n    /**\n     * Result of the import operation.\n     */\n    result: PropTypes.bool,\n\n    /**\n     * Data from the import operation.\n     */\n    data: PropTypes.object\n};\n"],"names":["url","__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getCurrentScript","script","document","currentScript","doc_scripts","getElementsByTagName","scripts","i","length","push","filter","s","async","text","textContent","slice","src","split","join","jsonpScriptSrc","__jsonpScriptSrc__","chunkId","isLocal","test","srcFragments","fileFragments","splice","window","_setPrototypeOf","p","setPrototypeOf","__proto__","CSVBoxButton","_Component","subClass","superClass","props","_this","this","holder","openModal","bind","self","ReferenceError","_assertThisInitialized","isModalShown","shouldOpenModalOnReady","uuid","generateUuid","state","isLoading","iframe","create","constructor","_proto","componentDidMount","lazy","enableInitator","initImporter","_this2","loadStarted","user","dynamicColumns","options","onReady","onImport","onSubmit","onClose","licenseKey","dataLocation","customDomain","language","domain","iframeUrl","addEventListener","event","_event$data","_event$data$data","data","current","style","display","unique_token","type","metadata","column_mapping","import_status","row_data","primary_row_data","headers","rows","dynamic_columns_indexes","dynamicColumnsIndexes","virtual_columns_indexes","virtualColumnsIndexes","dropdown_display_labels_mappings","forEach","x","dynamic_columns","virtual_data","col","undefined","includes","unmapped_data","keys","_metadata","raw_columns","ignored_column_row","_metadata2","_this2$onImport","_this2$onImport2","createElement","setAttribute","frameBorder","classList","add","height","width","position","top","left","onMessageEvent","onload","contentWindow","postMessage","appendChild","Math","random","toString","substring","setState","render","holderStyle","zIndex","bottom","right","ref","disabled","onClick","children","Component","CsvboxImporterForDash","_inherits","_super","_classCallCheck","apply","arguments","_this$props","id","userId","setProps","React","user_id","result","launch","defaultProps","propTypes","PropTypes","isRequired"],"sourceRoot":""}